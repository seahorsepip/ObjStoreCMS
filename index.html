<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
<div class="actions">
    <button class="show_models"><i class="material-icons">menu</i></button>
    <button class="create_object"><i class="material-icons">add</i>Add Frequently asked question</button>
    <button><i class="material-icons">person</i>Thomas Gladdines</button>
    <button><i class="material-icons">settings</i>Settings</button>
    <button class="search_button"><i class="material-icons">search</i></button>
    <input class="search" placeholder="Search..." required>
</div>
<aside class="models">
    <button class="create_model"><i class="material-icons">create</i>Create Model</button>
    <ul>
        <!--
        <li>Page content
            <button><i class="material-icons">edit</i></button>
        </li>
        <li>Frontpage item
            <button><i class="material-icons">edit</i></button>
        </li>
        <li class="selected">Frequently asked question
            <button><i class="material-icons">edit</i></button>
        </li>
        <li>Service rubric
            <button><i class="material-icons">edit</i></button>
        </li>
        <li>Subscription
            <button><i class="material-icons">edit</i></button>
        </li>
        -->
    </ul>
</aside>
<section class="objects">
    <table>
        <tr>
            <th>Title</th>
            <th>Updated</th>
            <th>Created</th>
        </tr>
        <tr>
            <td>Hoe weet ik of de informatie in een advertentie klopt?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Waar moet ik op letten als ik reageer op een advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Ik ben jonger dan 18 jaar. Mag ik op een advertentie reageren?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Ik heb mijn profielfoto veranderd, maar ik zie nog steeds de oude foto.</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Hoeveel advertenties mag ik plaatsen?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Wat zijn de kosten van het plaatsen van een advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Hoe kan ik duidelijk maken dat de informatie in mijn advertentie juist is?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Ik ben niet werkzaam als docent, mag ik dan toch een advertentie plaatsen op Docentenvooru?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Hoe plaats ik een advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Wordt de advertentie direct geplaatst nadat ik de gegevens heb doorgegeven?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Hoe verwijder ik een advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Hoe wijzig ik mijn advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Mag ik een e-mailadres of link opnemen in mijn advertentie?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Ik mis een categorie bij het keuzemenu van de diensten. Kan er een extra rubriek opgenomen worden?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Welke persoonsgegevens van iemand die een advertentie plaats, bewaart Docentenvooru en waarvoor worden
                deze gegevens gebruikt?
            </td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Moet ik mijn bijverdienste opgeven bij de belastingdienst?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Moet ik BTW rekenen voor de dienst die ik lever?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Moet ik mijn nevenactiviteiten melden bij mijn werkgever?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
        <tr>
            <td>Mag een docent, die in dienst is een onderwijsinstelling, nevenwerkzaamheden verrichten?</td>
            <td>20/12/2017</td>
            <td>20/12/2017</td>
        </tr>
    </table>
</section>
<script src="bundle.js"></script>
<script>
    const objects = document.querySelector('.objects tbody');
    const models = document.querySelector('.models ul');
    const createObjectButton = document.querySelector('.create_object');
    const createModelButton = document.querySelector('.create_model');

    let objs = [];
    let currentModelId;

    createObjectButton.addEventListener('click', e => window.location.href = `object#${currentModelId}`);
    createModelButton.addEventListener('click', e => window.location.href = 'model');
    objects.addEventListener('click', e => {
        if (e.target && e.target.matches('td')) {
            window.location.href = `object#${currentModelId}#${e.target.parentNode.dataset.id}`;
        }
    });
    models.addEventListener('click', e => {
        if (e.target && e.target.matches('li')) {
            let selected = models.querySelector('.selected');
            if (selected) selected.classList.remove('selected');
            e.target.classList.add('selected');
            currentModelId = e.target.dataset.id;
            let name = e.target.dataset.name;
            let html = '';
            objs.reverse().forEach(obj => {
                if (obj.model.id === currentModelId) {
                    html += `<tr data-id="${obj.id}">
                             <td>${obj.id}</td>
                             <td>20/12/2017</td>
                             <td>20/12/2017</td>
                         </tr>`;
                }
            });
            objects.innerHTML = html;
            createObjectButton.innerHTML = `<i class="material-icons">add</i>Add ${name}`;
        }
    });

    (async () => {
        try {
            objs = await localStore.read();
        } catch (e) {
        }
        try {
            (await localStore.models.read()).forEach(model => {
                let el = document.createElement("ul");
                el.innerHTML = `<li data-id="${model.id}" data-name="${model.name}">
                                ${model.name}
                                <button><i class="material-icons">edit</i></button>
                            </li>`;
                models.appendChild(el.children[0]);
            });
            models.children[0].click();
        } catch (e) {
        }
    })();
</script>
</body>
</html>